{"code":"import { BENTOBOX_ADDRESS, STOP_LIMIT_ORDER_ADDRESS } from '../constants';\r\nimport { bentoTypes, name, types } from '../types';\r\nimport { SigningKey } from '@ethersproject/signing-key';\r\nimport { getMessage } from 'eip-712';\r\nimport { splitSignature } from '@ethersproject/bytes';\r\nexport const getSignature = (message, chainId, privateKey) => {\r\n    let domain = {\r\n        name: name,\r\n        chainId: chainId,\r\n        verifyingContract: STOP_LIMIT_ORDER_ADDRESS[chainId]\r\n    };\r\n    return sign({ types, primaryType: 'LimitOrder', domain, message }, privateKey);\r\n};\r\nexport const getTypedData = (message, chainId) => {\r\n    let domain = {\r\n        name: name,\r\n        chainId: chainId,\r\n        verifyingContract: STOP_LIMIT_ORDER_ADDRESS[chainId]\r\n    };\r\n    return { types, primaryType: 'LimitOrder', domain, message };\r\n};\r\nexport const getTypedDataBento = (message, chainId) => {\r\n    let domain = {\r\n        name: 'BentoBox V1',\r\n        chainId: chainId,\r\n        verifyingContract: BENTOBOX_ADDRESS[chainId]\r\n    };\r\n    return {\r\n        types: bentoTypes,\r\n        primaryType: 'SetMasterContractApproval',\r\n        domain,\r\n        message\r\n    };\r\n};\r\nexport const getTypeHash = (typedData) => {\r\n    let message = getMessage(typedData, true).toString('hex');\r\n    return `0x${message}`;\r\n};\r\nconst sign = (typedData, privateKey) => {\r\n    let message = getMessage(typedData, true);\r\n    const signingKey = new SigningKey(privateKey);\r\n    const { v, r, s } = signingKey.signDigest(message);\r\n    return { v, r, s };\r\n};\r\nexport const getSignatureWithProvider = async (message, chainId, provider) => {\r\n    const typedData = getTypedData(message, chainId);\r\n    const signature = await provider.send('eth_signTypedData_v4', [message.maker, JSON.stringify(typedData)]);\r\n    const { v, r, s } = splitSignature(signature);\r\n    return { v, r, s };\r\n};\r\nexport const getSignatureWithProviderBentobox = async (message, chainId, provider) => {\r\n    const typedData = getTypedDataBento(message, chainId);\r\n    const signature = await provider.send('eth_signTypedData_v4', [message.user, JSON.stringify(typedData)]);\r\n    const { v, r, s } = splitSignature(signature);\r\n    return { v, r, s };\r\n};\r\nexport const getSignatureBento = async (bentoApproval, chainId, privateKey) => {\r\n    let domain = {\r\n        name: 'BentoBox V1',\r\n        chainId: chainId,\r\n        verifyingContract: BENTOBOX_ADDRESS[chainId]\r\n    };\r\n    return sign({\r\n        types: bentoTypes,\r\n        primaryType: 'SetMasterContractApproval',\r\n        domain,\r\n        message: bentoApproval\r\n    }, privateKey);\r\n};\r\n//# sourceMappingURL=eip712.js.map","references":["/Users/safahi/Documents/GitHub/core-sdk/src/constants/index.ts","/Users/safahi/Documents/GitHub/core-sdk/src/types/index.ts","/Users/safahi/Documents/GitHub/core-sdk/src/enums/index.ts","/Users/safahi/Documents/GitHub/core-sdk/node_modules/@ethersproject/signing-key/lib/index.d.ts","/Users/safahi/Documents/GitHub/core-sdk/node_modules/@ethersproject/providers/lib/index.d.ts","/Users/safahi/Documents/GitHub/core-sdk/node_modules/eip-712/typings/index.d.ts","/Users/safahi/Documents/GitHub/core-sdk/node_modules/@ethersproject/bytes/lib/index.d.ts"],"map":"{\"version\":3,\"file\":\"eip712.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/entities/eip712.ts\"],\"names\":[],\"mappings\":\"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\"}"}
